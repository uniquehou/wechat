{% extends 'library/base.html' %}
{% block title %} 分类检索 {% endblock %}
{% block style %}
<style>
	h2 {
		text-align: center;
	}
	.result {
		font-size: 16px;
		border-bottom: 3px solid #000;
		margin-bottom: 10px;
	}
	.books .ui-block-a {
		margin-left: -20px;
	}
	.books img{
		width: 100%;
		height: 138px;
	}
	.books a {
		text-decoration: none;
		text-align: center;
	}
</style>
{% endblock %}

{% block header %}
	<a class="icon icon-app pull-left open-panel"></a>
{% endblock %}

{% block main %}
	{% if classes %}
	<div data-theme="b">
		<h2>书籍分类</h2>
		<div data-inset="true" data-filter="true" data-filter-placeholder="筛选">
			{% for class in classes %}
			<div data-role="collapsible">
				<h3>{{class.name}}</h3>
				<ul data-role="listview">
					{% for sub in class.book_type_set.all %}
					<li><a href="{% url 'library:classification'  %}?id={{sub.id}}">&nbsp;&nbsp;{{sub.name}}</a></li>
					{% endfor %}
				</ul>
			</div>
			{% endfor %}
		</div>
	</div>

	{% else %}
	<h2>{{class.name}}</h2>
	<div class="ui-grid-b books">

		{% for each in book_a %}
		<div class="ui-block-a">
			<img src="{{each.image}}" class="book-name">
			<a href="{% url 'library:book_detail' %}?id={{each.id}}">{{each.name}}</a>
			<p class="book-writer">{{ each.author }}</p>
		</div>
		{% endfor %}
		{% for each in book_b %}
		<div class="ui-block-b">
			<img src="{{each.image}}" class="book-name">
			<a href="{% url 'library:book_detail' %}?id={{each.id}}">{{each.name}}</a>
			<p class="book-writer">{{ each.author }}</p>
		</div>
		{% endfor %}
		{% for each in book_c %}
		<div class="ui-block-c">
			<img src="{{each.image}}" class="book-name">
			<a href="{% url 'library:book_detail' %}?id={{each.id}}">{{each.name}}</a>
			<p class="book-writer">{{ each.author }}</p>
		</div>
		{% endfor %}
	</div>
	{% endif %}
{% endblock %}

{% block other %}
    <div class="panel panel-left panel-reveal">
        <div class="content-block">
        	<h3>所有书籍分类</h3>
            <div class="list-block">
            <ul>
            	{% for class in classes %}
            	<li class="item-content item-link"><div class="item-inner"><div class="item-title">{{class.name}}</div></div></li>
            	{% endfor %}
            </ul>
            <p><a href="#" class="close-panel">关闭</a></p>
        </div>
    </div>
{% endblock %}